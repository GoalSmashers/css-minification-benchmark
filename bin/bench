#!/usr/bin/env node
var fs = require('fs');
var bench = require('../lib/bench');
var processOutput = require('../lib/process-output');

// ARGUMENTS
var only = process.argv.indexOf('--only') > -1 ?
  new RegExp('.*(' + process.argv[process.argv.indexOf('--only') + 1].replace(/,/g, '|') + ').*') :
  /.+/;

var input = fs.readdirSync('data');
var asHTML = process.argv.indexOf('--html') > -1;
var measureGzip = process.argv.indexOf('--gzip') > -1;
var total = process.argv.indexOf('--total') > -1;
var verbose = process.argv.indexOf('--verbose') > -1;
var output = processOutput.getOutput(asHTML, measureGzip, total, verbose);

bench({
  only: only,
  total: total,
  gzip: measureGzip
}, input, output);
